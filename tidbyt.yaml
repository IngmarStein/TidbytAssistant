shell_command:
  tidbyt_display: ssh -i /config/.ssh/id_rsa -o 'StrictHostKeyChecking=no' bjt@192.168.20.11 '/home/bjt/tidbyt/TidbytDisplay.sh {{ content }} {{ deviceid }} {{ token }}'

script:
  tidbyt_notify:
    alias: Tidbyt Notify
    sequence:
      - repeat:
          for_each: "{{ device }}"
          sequence:
            - choose:
                - conditions:
                    - condition: template
                      value_template: "{{ repeat.item == 'Living Room' }}"
                  sequence:
                    - service: shell_command.tidbyt_display
                      data:
                        content: "{{ content }}"
                        deviceid: !secret tidbyt_deviceid_lr
                        token: !secret tidbyt_token_lr
                - conditions:
                    - condition: template
                      value_template: "{{ repeat.item == 'Loft' }}"
                  sequence:
                    - service: shell_command.tidbyt_display
                      data:
                        content: "{{ content }}"
                        deviceid: !secret tidbyt_deviceid_loft
                        token: !secret tidbyt_token_loft
                - conditions:
                    - condition: template
                      value_template: "{{ repeat.item == 'Office' }}"
                  sequence:
                    - service: shell_command.tidbyt_display
                      data:
                        content: "{{ content }}"
                        deviceid: !secret tidbyt_deviceid_office
                        token: !secret tidbyt_token_office
    fields:
      content:
        name: Content
        description: "The content you want displayed on the Tidbyt"
        required: true
        selector:
          select:
            options:
              - label: Washer
                value: washer
              - label: Dryer
                value: dryer
              - label: Dishwasher
                value: dishwasher
              - label: Coffee Maker
                value: coffee
              - label: Doorbell
                value: doorbell
              - label: HVAC Filters
                value: filters
              - label: Close Fridge
                value: fridge
              - label: Trash Day
                value: trash
              - label: Trash & Recycling Day
                value: TrashRecycle
      device:
        name: Device
        description: "The Tidbyt device you want to display on"
        required: true
        selector:
          select:
            multiple: true
            options:
              - Living Room
              - Loft
              - Office
    mode: single
    icon: mdi:checkbox-blank-badge
